/*!
 * 基于jQuery的星级评价小插件
 *
 * @link https://github.com/zhanguangcheng/jquery-star-rating
 * @author Grass <14712905@qq.com>
 * @version 0.1
 */
(function(a){if(typeof define=="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports=="object"){module.exports=a(require("jquery"))}else{a(jQuery)}}})(function(b){var a={readonly:false,defaultStar:0,starNumber:5,step:0.5,theme:"images/default.jpg",eventHover:function(d,e,c){},eventOut:function(d,e,c){},eventChange:function(d,e,c){},starWidth:24,starHeight:24};b.fn.starRating=function(e){e=b.extend({},a,e);var c=function(f){return Math.ceil((f/e.starWidth).toFixed(1)/e.step)/(1/e.step)};var d=function(f,g){var h=e.starHeight*2;if(g==e.starNumber){h=e.starHeight*3}else{if(g>=e.starNumber*0.6){h=e.starHeight}}b(".choose-star",f).css({width:e.starWidth*e.step*g*(1/e.step),backgroundPosition:"left -"+h+"px"})};b.each(this,function(){var i=b(this);var f={};b.each(["readonly","defaultStar","starNumber","step","theme","starWidth","starHeight"],function(k,j){if(i.data(j)){f[j]=i.data(j)}});e=b.extend({},e,f);var g=e.defaultStar;var h;i.bind("starRating:hover",e.eventHover);i.bind("starRating:out",e.eventOut);i.bind("starRating:change",e.eventChange);i.html('<div class="choose-star"></div>');i.css({width:e.starWidth*e.starNumber,height:e.starHeight,background:"url("+e.theme+") repeat-x left top"});i.find(".choose-star").css({width:e.starWidth*e.defaultStar,height:e.starHeight,background:"url("+e.theme+") repeat-x left top"});d(i,g);if(e.readonly){return}i.on("mousemove",function(j){var k=c(j.offsetX);if(h!=k){h=k;d(i,k);i.trigger("starRating:hover",[k,e])}}).on("mouseleave",function(j){d(i,g);h=g;i.trigger("starRating:out",[g,e])}).on("click",function(j){g=c(j.offsetX);i.trigger("starRating:change",[g,e])})})}});